const dashboardDate=document.querySelector(".dashboard__date"),overlay=document.querySelector(".js-overlay-modal");var x,i,j,selElmnt,a,b,c;for(dashboardDate&&(dashboardDate.addEventListener("click",e=>{overlay.classList.add("active"),overlay.addEventListener("click",function(){this.classList.remove("active")})}),setTimeout(()=>{const e=document.querySelector(".cancelBtn"),t=document.querySelector(".applyBtn");e.addEventListener("click",e=>{overlay.classList.remove("active")}),t.addEventListener("click",e=>{overlay.classList.remove("active")})},1e3)),x=document.getElementsByClassName("custom-select"),i=0;i<x.length;i++){for(selElmnt=x[i].getElementsByTagName("select")[0],(a=document.createElement("DIV")).setAttribute("class","select-selected"),a.innerHTML=selElmnt.options[selElmnt.selectedIndex].innerHTML,x[i].appendChild(a),(b=document.createElement("DIV")).setAttribute("class","select-items select-hide"),j=0;j<selElmnt.length;j++)(c=document.createElement("DIV")).innerHTML=selElmnt.options[j].innerHTML,c.addEventListener("click",function(e){var t,o,a,s,n;for(s=this.parentNode.parentNode.getElementsByTagName("select")[0],n=this.parentNode.previousSibling,o=0;o<s.length;o++)if(s.options[o].innerHTML==this.innerHTML){for(s.selectedIndex=o,n.innerHTML=this.innerHTML,t=this.parentNode.getElementsByClassName("same-as-selected"),a=0;a<t.length;a++)t[a].removeAttribute("class");this.setAttribute("class","same-as-selected");break}n.click()}),b.appendChild(c);x[i].appendChild(b),a.addEventListener("click",function(e){e.stopPropagation(),closeAllSelect(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")})}function closeAllSelect(e){var t,o,a,s=[];for(t=document.getElementsByClassName("select-items"),o=document.getElementsByClassName("select-selected"),a=0;a<o.length;a++)e==o[a]?s.push(a):o[a].classList.remove("select-arrow-active");for(a=0;a<t.length;a++)s.indexOf(a)&&t[a].classList.add("select-hide")}document.addEventListener("click",closeAllSelect),function(e){"function"!=typeof e.matches&&(e.matches=e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,o=(t.document||t.ownerDocument).querySelectorAll(e),a=0;o[a]&&o[a]!==t;)++a;return Boolean(o[a])}),"function"!=typeof e.closest&&(e.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})}(window.Element.prototype);const modalOpenBodyFix=()=>{document.body.style.position="fixed",document.body.style.top=`-${window.scrollY}px`},modalCloseBodyFix=()=>{const e=document.body.style.top;document.body.style.position="",document.body.style.top="",window.scrollTo(0,-1*parseInt(e||"0"))};document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".js-open-modal"),t=document.querySelector(".js-overlay-modal"),o=document.querySelectorAll(".js-modal-close");modalClose=document.querySelectorAll(".__modal_btn"),e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var o=this.getAttribute("data-modal");document.querySelector('.modal[data-modal="'+o+'"]').classList.add("active"),t.classList.add("active"),document.body.style.position="fixed",document.body.style.top=`-${window.scrollY}px`})}),o.forEach(function(e){e.addEventListener("click",function(e){this.closest(".modal").classList.remove("active"),t.classList.remove("active"),modalCloseBodyFix()})}),modalClose.forEach(function(e){e.addEventListener("click",function(e){this.closest(".modal").classList.remove("active"),t.classList.remove("active"),modalCloseBodyFix()})}),document.body.addEventListener("keyup",function(e){27==e.keyCode&&(document.querySelector(".modal.active")&&(document.querySelector(".modal.active").classList.remove("active"),modalCloseBodyFix()),document.querySelector(".overlay").classList.remove("active"))},!1),t.addEventListener("click",function(){document.querySelector(".modal.active")&&(document.querySelector(".modal.active").classList.remove("active"),modalCloseBodyFix()),this.classList.remove("active")})}),$('input[name="daterange"]').daterangepicker({minYear:2e3,maxYear:2050,ranges:{"Последние 7 дней":[moment().subtract(6,"days"),moment()],"Последние 30 дней":[moment().subtract(29,"days"),moment()],"Последние 12 месяцев":[moment().subtract(11,"month"),moment()],"Текущая неделя":[moment().startOf("week"),moment().endOf("week")],"Прошлая неделя":[moment().subtract(1,"week").startOf("week"),moment().subtract(1,"week").endOf("week")],"Текущий месяц":[moment().startOf("month"),moment().endOf("month")],"Прошлый месяц":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Текущий год":[moment().startOf("year"),moment().endOf("year")]},locale:{format:"MM.DD.YYYY",separator:" - ",applyLabel:"Выбрать",cancelLabel:"Отменить",fromLabel:"From",toLabel:"To",customRangeLabel:"Произвольный период",weekLabel:"W",daysOfWeek:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],firstDay:7},startDate:"06/28/2023",endDate:"07/04/2023"},function(e,t,o){console.log("New date range selected: "+e.format("DD-MM-YYYY")+" to "+t.format("DD-MM-YYYY")+" (predefined range: "+o+")"),overlay.classList.remove("active")});const showMoreBtn=document.querySelector(".dashboard__btn");if(showMoreBtn){let e=showMoreBtn.closest(".dashboard__data").querySelectorAll(".table__line_hidden");showMoreBtn.addEventListener("click",()=>{for(let t of e)t.classList.toggle("visible")})}const ctx=document.getElementById("myChart");Chart.defaults.borderColor="transparent",Chart.defaults.color="#000",new Chart(ctx,{type:"bar",data:{labels:["15.05 - 22.05","22.05 - 29.05","29.05 - 04.06","04.06 - 11.06","18.06 - 25.06"],datasets:[{label:"Выручка",data:[2e5,3e5,41e4,4e5,35e4],backgroundColor:"#01A9AC"},{label:"Маржа",data:[15e4,2e5,15e4,22e4,22e4],backgroundColor:"#0AC282"}]},options:{scales:{x:{stacked:!0,display:!1},y:{stacked:!0,display:!1}},plugins:{customCanvasBackgroundColor:{color:"white"},responsive:!0,maintainAspectRatio:!0,legend:!1,subtitle:{display:!0,text:"Маржа и выручка",color:"#000",position:"top",align:"start",font:{family:"Inter",size:14,weight:"bold"}}}}});const secondCtx=document.getElementById("myChart-2");Chart.defaults.borderColor="transparent",Chart.defaults.color="#000",new Chart(secondCtx,{type:"bar",data:{labels:["15.05 - 22.05","22.05 - 29.05","29.05 - 04.06","04.06 - 11.06","18.06 - 25.06"],datasets:[{label:"Выручка",data:[1e5,2e5,3e5,2e5,3e5],backgroundColor:"#FE5D70"},{label:"Закупки",data:[2e5,3e5,3e5,4e5,2e5],backgroundColor:"#0AC282"}]},options:{scales:{x:{display:!1},y:{display:!1}},plugins:{customCanvasBackgroundColor:{color:"white"},responsive:!0,maintainAspectRatio:!0,legend:!1,subtitle:{display:!0,text:"Выручка, закупки и остатки",color:"#000",position:"top",align:"start",font:{family:"Inter",size:14,weight:"bold"}}}}});